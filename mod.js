// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./mod.d.ts" />
function r(r){return r.dtype}function e(r){var e,i,n;for(i=r.length,e=[],n=0;n<i;n++)e.push(r[n]);return e}function i(r){var e,i,n;return"number"==typeof(n=r.offset)?n:0===(i=r.shape).length||"object"!=typeof(e=r.strides)||null===e?0:function(r,e){var i,n,t;for(n=r.length,i=0,t=0;t<n;t++)e[t]<0&&(i-=e[t]*(r[t]-1));return i}(i,e)}function n(r){return Math.abs(r)}function t(r){var e,i;return"string"==typeof(i=r.order)?i:"object"!=typeof(e=r.strides)||null===e?"row-major":(i=function(r){var e,i,t,a,o,s;if(0===(i=r.length))return 0;for(e=!0,t=!0,a=n(r[0]),s=1;s<i;s++){if(o=n(r[s]),e&&o<a?e=!1:t&&o>a&&(t=!1),!t&&!e)return 0;a=o}return t&&e?3:t?1:2}(e),1===i||3===i?"row-major":2===i?"column-major":0===r.shape.length?"row-major":null)}function a(r){return r.data}function o(r){return"number"==typeof r}function s(r){var e,i="";for(e=0;e<r;e++)i+="0";return i}function c(r,e,i){var n=!1,t=e-r.length;return t<0||(function(r){return"-"===r[0]}(r)&&(n=!0,r=r.substr(1)),r=i?r+s(t):s(t)+r,n&&(r="-"+r)),r}var p=String.prototype.toLowerCase,u=String.prototype.toUpperCase;function l(r){var e,i,n;switch(r.specifier){case"b":e=2;break;case"o":e=8;break;case"x":case"X":e=16;break;default:e=10}if(i=r.arg,n=parseInt(i,10),!isFinite(n)){if(!o(i))throw new Error("invalid integer. Value: "+i);n=0}return n<0&&("u"===r.specifier||10!==e)&&(n=4294967295+n+1),n<0?(i=(-n).toString(e),r.precision&&(i=c(i,r.precision,r.padRight)),i="-"+i):(i=n.toString(e),n||r.precision?r.precision&&(i=c(i,r.precision,r.padRight)):i="",r.sign&&(i=r.sign+i)),16===e&&(r.alternate&&(i="0x"+i),i=r.specifier===u.call(r.specifier)?u.call(i):p.call(i)),8===e&&r.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function f(r){return"string"==typeof r}var g=Math.abs,h=String.prototype.toLowerCase,d=String.prototype.toUpperCase,w=String.prototype.replace,v=/e\+(\d)$/,b=/e-(\d)$/,m=/^(\d+)$/,y=/^(\d+)e/,x=/\.0$/,E=/\.0*e/,k=/(\..*[^0])0*e/;function S(r){var e,i,n=parseFloat(r.arg);if(!isFinite(n)){if(!o(r.arg))throw new Error("invalid floating-point number. Value: "+i);n=r.arg}switch(r.specifier){case"e":case"E":i=n.toExponential(r.precision);break;case"f":case"F":i=n.toFixed(r.precision);break;case"g":case"G":g(n)<1e-4?((e=r.precision)>0&&(e-=1),i=n.toExponential(e)):i=n.toPrecision(r.precision),r.alternate||(i=w.call(i,k,"$1e"),i=w.call(i,E,"e"),i=w.call(i,x,""));break;default:throw new Error("invalid double notation. Value: "+r.specifier)}return i=w.call(i,v,"e+0$1"),i=w.call(i,b,"e-0$1"),r.alternate&&(i=w.call(i,m,"$1."),i=w.call(i,y,"$1.e")),n>=0&&r.sign&&(i=r.sign+i),i=r.specifier===d.call(r.specifier)?d.call(i):h.call(i)}function V(r){var e,i="";for(e=0;e<r;e++)i+=" ";return i}function $(r,e,i){var n=e-r.length;return n<0?r:r=i?r+V(n):V(n)+r}var R=String.fromCharCode,F=isNaN,I=Array.isArray;function j(r){var e={};return e.specifier=r.specifier,e.precision=void 0===r.precision?1:r.precision,e.width=r.width,e.flags=r.flags||"",e.mapping=r.mapping,e}function A(r){var e,i,n,t,a,o,s,p,u;if(!I(r))throw new TypeError("invalid argument. First argument must be an array. Value: `"+r+"`.");for(o="",s=1,p=0;p<r.length;p++)if(f(n=r[p]))o+=n;else{if(e=void 0!==n.precision,!(n=j(n)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+p+"`. Value: `"+n+"`.");for(n.mapping&&(s=n.mapping),i=n.flags,u=0;u<i.length;u++)switch(t=i.charAt(u)){case" ":n.sign=" ";break;case"+":n.sign="+";break;case"-":n.padRight=!0,n.padZeros=!1;break;case"0":n.padZeros=i.indexOf("-")<0;break;case"#":n.alternate=!0;break;default:throw new Error("invalid flag: "+t)}if("*"===n.width){if(n.width=parseInt(arguments[s],10),s+=1,F(n.width))throw new TypeError("the argument for * width at position "+s+" is not a number. Value: `"+n.width+"`.");n.width<0&&(n.padRight=!0,n.width=-n.width)}if(e&&"*"===n.precision){if(n.precision=parseInt(arguments[s],10),s+=1,F(n.precision))throw new TypeError("the argument for * precision at position "+s+" is not a number. Value: `"+n.precision+"`.");n.precision<0&&(n.precision=1,e=!1)}switch(n.arg=arguments[s],n.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":e&&(n.padZeros=!1),n.arg=l(n);break;case"s":n.maxWidth=e?n.precision:-1;break;case"c":if(!F(n.arg)){if((a=parseInt(n.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+n.arg);n.arg=F(a)?String(n.arg):R(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":e||(n.precision=6),n.arg=S(n);break;default:throw new Error("invalid specifier: "+n.specifier)}n.maxWidth>=0&&n.arg.length>n.maxWidth&&(n.arg=n.arg.substring(0,n.maxWidth)),n.padZeros?n.arg=c(n.arg,n.width||n.precision,n.padRight):n.width&&(n.arg=$(n.arg,n.width,n.padRight)),o+=n.arg||"",s+=1}return o}var C=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function T(r){var e={mapping:r[1]?parseInt(r[1],10):void 0,flags:r[2],width:r[3],precision:r[5],specifier:r[6]};return"."===r[4]&&void 0===r[5]&&(e.precision="1"),e}function Z(r){var e,i,n,t;for(i=[],t=0,n=C.exec(r);n;)(e=r.slice(t,C.lastIndex-n[0].length)).length&&i.push(e),i.push(T(n)),t=C.lastIndex,n=C.exec(r);return(e=r.slice(t)).length&&i.push(e),i}function L(r){return"string"==typeof r}function M(r){var e,i,n;if(!L(r))throw new TypeError(M("invalid argument. First argument must be a string. Value: `%s`.",r));for(e=Z(r),(i=new Array(arguments.length))[0]=e,n=1;n<i.length;n++)i[n]=arguments[n];return A.apply(null,i)}function W(n,o){var s,c,p,u,l,f,g,h;if(u=function(r,i){var n=r.shape;return i?e(n):n}(n),l=function(r,i){var n=r.strides;return i?e(n):n}(n),p=t(n),f=u.length,s=[],c=[],o<0){if(o<-f-1)throw new RangeError(M("invalid argument. Specified axis is out-of-bounds. Must be on the interval: [-%u-1, %u]. Value: `%d`.",f,f,o));o+=f+1}else if(o>f)throw new RangeError(M("invalid argument. Specified axis is out-of-bounds. Must be on the interval: [-%u-1, %u]. Value: `%d`.",f,f,o));if(0===o)for(c.push(1),s.push(l[0]),g=0;g<f;g++)c.push(u[g]),s.push(l[g]);else if(o===f){for(g=0;g<f;g++)c.push(u[g]),s.push(l[g]);c.push(1),s.push(l[f-1])}else for(g=0;g<f+1;g++)g===o?(c.push(1),"row-major"===p?s.push(l[g-1]):s.push(l[g])):g<o?(c.push(u[g]),s.push(l[g])):(c.push(u[g-1]),s.push(l[g-1]));return(h=n.flags)&&!0===h.READONLY?new n.constructor(r(n),a(n),c,s,i(n),p,{readonly:!0}):new n.constructor(r(n),a(n),c,s,i(n),p)}export{W as default};
//# sourceMappingURL=mod.js.map
